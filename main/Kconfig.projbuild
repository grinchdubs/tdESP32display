menu "Physical Player of Pixel Art (P3A)"

    menu "Display"
        config P3A_LCD_ENABLE_CACHE_FLUSH
            bool "Flush LCD frame buffer via esp_cache_msync"
            default y
            help
                Enable cache flushes before handing the framebuffer to the panel driver.
                Disable to evaluate DMA coherency without the extra msync cost.
    endmenu

    menu "Animation"
        config P3A_SD_ANIMATIONS_DIR
            string "SD card animations directory"
            default "/sdcard/animations"
            help
                Directory path on SD card containing WebP animation files.
                Files will be loaded alphabetically.

        config P3A_MAX_SPEED_PLAYBACK
            bool "Ignore WebP frame delays and play at maximum speed"
            default y
            help
                When enabled, the animation task disregards per-frame timing metadata and
                schedules the next frame as soon as it is ready. Disable to respect the
                original WebP delays.

        config P3A_RENDER_TASK_PRIORITY
            int "Animation task priority"
            default 5
            range 1 15
            help
                FreeRTOS priority assigned to the animation render task.
    endmenu

    menu "Touch"
        config P3A_TOUCH_TASK_PRIORITY
            int "Touch task priority"
            default 5
            range 1 15
            help
                FreeRTOS priority assigned to the touch controller polling task.

        config P3A_TOUCH_POLL_INTERVAL_MS
            int "Touch poll interval (ms)"
            default 20
            range 5 100
            help
                Delay between successive reads of the touch controller.

        config P3A_TOUCH_SWIPE_MIN_HEIGHT_PERCENT
            int "Minimum swipe height percentage"
            default 10
            range 5 50
            help
                Minimum vertical swipe distance (as percentage of screen height) required
                to trigger brightness control gesture. Smaller values make gestures more sensitive.

        config P3A_TOUCH_BRIGHTNESS_MAX_DELTA_PERCENT
            int "Maximum brightness change per full swipe"
            default 75
            range 10 100
            help
                Maximum brightness change (in percentage points) when performing a full
                vertical swipe from one edge to the opposite edge of the screen.
    endmenu

    menu "Wi-Fi"
        config ESP_WIFI_SSID
            string "WiFi SSID"
            default "myssid"
            help
                SSID (network name) for the device to connect to.

        config ESP_WIFI_PASSWORD
            string "WiFi Password"
            default "mypassword"
            help
                WiFi password (WPA or WPA2) for the device to use.

        choice ESP_WIFI_SAE_MODE
            prompt "WPA3 SAE mode selection"
            default ESP_WPA3_SAE_PWE_BOTH
            help
                Select mode for SAE as Hunt and Peck, H2E or both.
            config ESP_WPA3_SAE_PWE_HUNT_AND_PECK
                bool "HUNT AND PECK"
            config ESP_WPA3_SAE_PWE_HASH_TO_ELEMENT
                bool "H2E"
            config ESP_WPA3_SAE_PWE_BOTH
                bool "BOTH"
        endchoice

        config ESP_WIFI_PW_ID
            string "PASSWORD IDENTIFIER"
            depends on ESP_WPA3_SAE_PWE_HASH_TO_ELEMENT || ESP_WPA3_SAE_PWE_BOTH
            default ""
            help
                password identifier for SAE H2E

        config ESP_MAXIMUM_RETRY
            int "Maximum retry"
            default 3
            help
                Set the Maximum retry to avoid station reconnecting to the AP unlimited when the AP is really inexistent.
                After this many failures, the device will start the captive portal.

        config ESP_AP_SSID
            string "Soft AP SSID"
            default "p3a-setup"
            help
                SSID (network name) for the Soft AP when captive portal is active.

        config ESP_AP_PASSWORD
            string "Soft AP Password"
            default ""
            help
                Password for the Soft AP. Leave empty for open network.

        choice ESP_WIFI_SCAN_AUTH_MODE_THRESHOLD
            prompt "WiFi Scan auth mode threshold"
            default ESP_WIFI_AUTH_WPA2_PSK
            help
                The weakest authmode to accept in the scan mode.
                This value defaults to ESP_WIFI_AUTH_WPA2_PSK incase password is present and ESP_WIFI_AUTH_OPEN is used.
                Please select ESP_WIFI_AUTH_WEP/ESP_WIFI_AUTH_WPA_PSK incase AP is operating in WEP/WPA mode.

            config ESP_WIFI_AUTH_OPEN
                bool "OPEN"
            config ESP_WIFI_AUTH_WEP
                bool "WEP"
            config ESP_WIFI_AUTH_WPA_PSK
                bool "WPA PSK"
            config ESP_WIFI_AUTH_WPA2_PSK
                bool "WPA2 PSK"
            config ESP_WIFI_AUTH_WPA_WPA2_PSK
                bool "WPA/WPA2 PSK"
            config ESP_WIFI_AUTH_WPA3_PSK
                bool "WPA3 PSK"
            config ESP_WIFI_AUTH_WPA2_WPA3_PSK
                bool "WPA2/WPA3 PSK"
            config ESP_WIFI_AUTH_WAPI_PSK
                bool "WAPI PSK"
        endchoice
    endmenu

    choice
        prompt "LCD color format"
        default LCD_PIXEL_FORMAT_RGB888
        help
            Select the framebuffer color encoding used by the panel driver.

        config LCD_PIXEL_FORMAT_RGB565
            bool "RGB565"
            select BSP_LCD_COLOR_FORMAT_RGB565

        config LCD_PIXEL_FORMAT_RGB888
            bool "RGB888"
            depends on IDF_TARGET_ESP32P4
            select BSP_LCD_COLOR_FORMAT_RGB888
    endchoice
endmenu
